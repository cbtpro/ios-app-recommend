import{L as Ae,H as ct,M as Se,G,r as D,o as Le,N as Q,I as Lt,O as B,P as Oe,i as $,K as ue,Q as Me,d as A,z as v,R as Fe,S as Ot,B as ut,T as dt,t as F,U as Mt,e as Ft,a as ft,V as ee,W as Nt,X as mt,Y as zt,Z as Ye,$ as Ht,a0 as Kt,q as Ut,v as z,x as T,y as ne,_ as de,a1 as ht,a2 as jt,a3 as Ne,a4 as gt,C as vt,D as bt,a5 as Wt,a6 as Yt,A as qe}from"./DCt53daL.js";const ae=Object.assign,ze=typeof window<"u",xe=e=>e!==null&&typeof e=="object",L=e=>e!=null,Ee=e=>typeof e=="function",qt=e=>xe(e)&&Ee(e.then)&&Ee(e.catch),_t=e=>typeof e=="number"||/^\d+(\.\d+)?$/.test(e),Xt=()=>ze?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function Xe(e,t){const n=t.split(".");let a=e;return n.forEach(r=>{var o;a=xe(a)&&(o=a[r])!=null?o:""}),a}function Ge(e,t,n){return t.reduce((a,r)=>(a[r]=e[r],a),{})}const Je=e=>Array.isArray(e)?e:[e],we=null,k=[Number,String],De={type:Boolean,default:!0},Gt=e=>({type:Number,default:e}),Ce=e=>({type:k,default:e}),O=e=>({type:String,default:e});var He=typeof window<"u",Jt=e=>e===window,Ze=(e,t)=>({top:0,left:0,right:e,bottom:t,width:e,height:t}),te=e=>{const t=B(e);if(Jt(t)){const n=t.innerWidth,a=t.innerHeight;return Ze(n,a)}return t!=null&&t.getBoundingClientRect?t.getBoundingClientRect():Ze(0,0)};function Zt(e){const t=Oe(e,null);if(t){const n=ue(),{link:a,unlink:r,internalChildren:o}=t;a(n),Ae(()=>r(n));const h=$(()=>o.indexOf(n));return{parent:t,index:h}}return{parent:null,index:D(-1)}}function yt(e){let t;Le(()=>{e(),Q(()=>{t=!0})}),Lt(()=>{t&&e()})}function Ke(e,t,n={}){if(!He)return;const{target:a=window,passive:r=!1,capture:o=!1}=n;let h=!1,s;const l=u=>{if(h)return;const f=B(u);f&&!s&&(f.addEventListener(e,t,{capture:o,passive:r}),s=!0)},c=u=>{if(h)return;const f=B(u);f&&s&&(f.removeEventListener(e,t,o),s=!1)};Ae(()=>c(a)),ct(()=>c(a)),yt(()=>l(a));let d;return Se(a)&&(d=G(a,(u,f)=>{c(f),l(u)})),()=>{d==null||d(),c(a),h=!0}}var ye,Pe;function Qt(){if(!ye&&(ye=D(0),Pe=D(0),He)){const e=()=>{ye.value=window.innerWidth,Pe.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:ye,height:Pe}}var en=/scroll|auto|overlay/i,pt=He?window:void 0;function tn(e){return e.tagName!=="HTML"&&e.tagName!=="BODY"&&e.nodeType===1}function nn(e,t=pt){let n=e;for(;n&&n!==t&&tn(n);){const{overflowY:a}=window.getComputedStyle(n);if(en.test(a))return n;n=n.parentNode}return t}function an(e,t=pt){const n=D();return Le(()=>{e.value&&(n.value=nn(e.value,t))}),n}var wt=Symbol("van-field");function on(e){const t=Oe(wt,null);t&&!t.customValue.value&&(t.customValue.value=e,G(e,()=>{t.resetValidation(),t.validateWithTrigger("onChange")}))}function rn(e){const t="scrollTop"in e?e.scrollTop:e.pageYOffset;return Math.max(t,0)}function Qe(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function Et(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function Ct(e){Qe(window,e),Qe(document.body,e)}const ln=Xt();function sn(){ln&&Ct(Et())}function ce(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault()}function et(e){const t=B(e);if(!t)return!1;const n=window.getComputedStyle(t),a=n.display==="none",r=t.offsetParent===null&&n.position!=="fixed";return a||r}const{width:St,height:xt}=Qt();function H(e){if(L(e))return _t(e)?`${e}px`:String(e)}function cn(e){const t={};return e!==void 0&&(t.zIndex=+e),t}let Re;function un(){if(!Re){const e=document.documentElement,t=e.style.fontSize||window.getComputedStyle(e).fontSize;Re=parseFloat(t)}return Re}function dn(e){return e=e.replace(/rem/g,""),+e*un()}function fn(e){return e=e.replace(/vw/g,""),+e*St.value/100}function mn(e){return e=e.replace(/vh/g,""),+e*xt.value/100}function hn(e){if(typeof e=="number")return e;if(ze){if(e.includes("rem"))return dn(e);if(e.includes("vw"))return fn(e);if(e.includes("vh"))return mn(e)}return parseFloat(e)}const gn=/-(\w)/g,Dt=e=>e.replace(gn,(t,n)=>n.toUpperCase());function tt(e,t,n){const a=e.indexOf(t);return a===-1?e:t==="-"&&a!==0?e.slice(0,a):e.slice(0,a+1)+e.slice(a).replace(n,"")}function vn(e,t=!0,n=!0){t?e=tt(e,".",/\./g):e=e.split(".")[0],n?e=tt(e,"-",/-/g):e=e.replace(/-/,"");const a=t?/[^-0-9.]/g:/[^-0-9]/g;return e.replace(a,"")}const{hasOwnProperty:bn}=Object.prototype;function _n(e,t,n){const a=t[n];L(a)&&(!bn.call(e,n)||!xe(a)?e[n]=a:e[n]=It(Object(e[n]),a))}function It(e,t){return Object.keys(t).forEach(n=>{_n(e,t,n)}),e}var yn={name:"姓名",tel:"电话",save:"保存",clear:"清空",cancel:"取消",confirm:"确认",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const nt=D("zh-CN"),at=Me({"zh-CN":yn}),pn={messages(){return at[nt.value]},use(e,t){nt.value=e,this.add({[e]:t})},add(e={}){It(at,e)}};var wn=pn;function En(e){const t=Dt(e)+".";return(n,...a)=>{const r=wn.messages(),o=Xe(r,t+n)||Xe(r,n);return Ee(o)?o(...a):o}}function Ve(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((n,a)=>n+Ve(e,a),""):Object.keys(t).reduce((n,a)=>n+(t[a]?Ve(e,a):""),""):""}function Cn(e){return(t,n)=>(t&&typeof t!="string"&&(n=t,t=""),t=t?`${e}__${t}`:e,`${t}${Ve(t,n)}`)}function Y(e){const t=`van-${e}`;return[t,Cn(t),En(t)]}const Sn=Symbol("van-form"),ot=5;function Ie(e){return e.install=t=>{const{name:n}=e;n&&(t.component(n,e),t.component(Dt(`-${n}`),e))},e}function $t(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function xn(e,t){if($t(e)){if(t.required)return!1;if(t.validateEmpty===!1)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}function Dn(e,t){return new Promise(n=>{const a=t.validator(e,t);if(qt(a)){a.then(n);return}n(a)})}function rt(e,t){const{message:n}=t;return Ee(n)?n(e,t):n||""}function In({target:e}){e.composing=!0}function it({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function $n(e,t){const n=Et();e.style.height="auto";let a=e.scrollHeight;if(xe(t)){const{maxHeight:r,minHeight:o}=t;r!==void 0&&(a=Math.min(a,r)),o!==void 0&&(a=Math.max(a,o))}a&&(e.style.height=`${a}px`,Ct(n))}function Bn(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function j(e){return[...e].length}function Te(e,t){return[...e].slice(0,t).join("")}const Pn={to:[String,Object],url:String,replace:Boolean};function Rn({to:e,url:t,replace:n,$router:a}){e&&a?a[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}function Tn(){const e=ue().proxy;return()=>Rn(e)}const[Vn,lt]=Y("badge"),kn={dot:Boolean,max:k,tag:O("div"),color:String,offset:Array,content:k,showZero:De,position:O("top-right")};var An=A({name:Vn,props:kn,setup(e,{slots:t}){const n=()=>{if(t.content)return!0;const{content:s,showZero:l}=e;return L(s)&&s!==""&&(l||s!==0&&s!=="0")},a=()=>{const{dot:s,max:l,content:c}=e;if(!s&&n())return t.content?t.content():L(l)&&_t(c)&&+c>+l?`${l}+`:c},r=s=>s.startsWith("-")?s.replace("-",""):`-${s}`,o=$(()=>{const s={background:e.color};if(e.offset){const[l,c]=e.offset,{position:d}=e,[u,f]=d.split("-");t.default?(typeof c=="number"?s[u]=H(u==="top"?c:-c):s[u]=u==="top"?H(c):r(c),typeof l=="number"?s[f]=H(f==="left"?l:-l):s[f]=f==="left"?H(l):r(l)):(s.marginTop=H(c),s.marginLeft=H(l))}return s}),h=()=>{if(n()||e.dot)return v("div",{class:lt([e.position,{dot:e.dot,fixed:!!t.default}]),style:o.value},[a()])};return()=>{if(t.default){const{tag:s}=e;return v(s,{class:lt("wrapper")},{default:()=>[t.default(),h()]})}return h()}}});const Ln=Ie(An),[On,Qa]=Y("config-provider"),Mn=Symbol(On),[Fn,st]=Y("icon"),Nn=e=>e==null?void 0:e.includes("/"),zn={dot:Boolean,tag:O("i"),name:String,size:k,badge:k,color:String,badgeProps:Object,classPrefix:String};var Hn=A({name:Fn,props:zn,setup(e,{slots:t}){const n=Oe(Mn,null),a=$(()=>e.classPrefix||(n==null?void 0:n.iconPrefix)||st());return()=>{const{tag:r,dot:o,name:h,size:s,badge:l,color:c}=e,d=Nn(h);return v(Ln,Fe({dot:o,tag:r,class:[a.value,d?"":`${a.value}-${h}`],style:{color:c,fontSize:H(s)},content:l},e.badgeProps),{default:()=>{var u;return[(u=t.default)==null?void 0:u.call(t),d&&v("img",{class:st("image"),src:h},null)]}})}}});const X=Ie(Hn),[Kn,Z]=Y("cell"),Bt={tag:O("div"),icon:String,size:String,title:k,value:k,label:k,center:Boolean,isLink:Boolean,border:De,iconPrefix:String,valueClass:we,labelClass:we,titleClass:we,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},Un=ae({},Bt,Pn);var jn=A({name:Kn,props:Un,setup(e,{slots:t}){const n=Tn(),a=()=>{if(t.label||L(e.label))return v("div",{class:[Z("label"),e.labelClass]},[t.label?t.label():e.label])},r=()=>{var l;if(t.title||L(e.title)){const c=(l=t.title)==null?void 0:l.call(t);return Array.isArray(c)&&c.length===0?void 0:v("div",{class:[Z("title"),e.titleClass],style:e.titleStyle},[c||v("span",null,[e.title]),a()])}},o=()=>{const l=t.value||t.default;if(l||L(e.value))return v("div",{class:[Z("value"),e.valueClass]},[l?l():v("span",null,[e.value])])},h=()=>{if(t.icon)return t.icon();if(e.icon)return v(X,{name:e.icon,class:Z("left-icon"),classPrefix:e.iconPrefix},null)},s=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const l=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return v(X,{name:l,class:Z("right-icon")},null)}};return()=>{var l;const{tag:c,size:d,center:u,border:f,isLink:S,required:y}=e,E=(l=e.clickable)!=null?l:S,_={center:u,required:!!y,clickable:E,borderless:!f};return d&&(_[d]=!!d),v(c,{class:Z(_),role:E?"button":void 0,tabindex:E?0:void 0,onClick:n},{default:()=>{var C;return[h(),r(),o(),s(),(C=t.extra)==null?void 0:C.call(t)]}})}}});let Wn=0;function Pt(){const e=ue(),{name:t="unknown"}=(e==null?void 0:e.type)||{};return`${t}-${++Wn}`}function Rt(e){const t=ue();t&&ae(t.proxy,e)}const Yn=Ie(jn),[qn,M]=Y("field"),Ue={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:k,formatter:Function,clearIcon:O("clear"),modelValue:Ce(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:O("focus"),formatTrigger:O("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Xn=ae({},Bt,Ue,{rows:k,type:O("text"),rules:Array,autosize:[Boolean,Object],labelWidth:k,labelClass:we,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Gn=A({name:qn,props:Xn,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:n}){const a=Pt(),r=Me({status:"unvalidated",focused:!1,validateMessage:""}),o=D(),h=D(),s=D(),{parent:l}=Zt(Sn),c=()=>{var i;return String((i=e.modelValue)!=null?i:"")},d=i=>{if(L(e[i]))return e[i];if(l&&L(l.props[i]))return l.props[i]},u=$(()=>{const i=d("readonly");if(e.clearable&&!i){const p=c()!=="",w=e.clearTrigger==="always"||e.clearTrigger==="focus"&&r.focused;return p&&w}return!1}),f=$(()=>s.value&&n.input?s.value():e.modelValue),S=$(()=>{var i;const p=d("required");return p==="auto"?(i=e.rules)==null?void 0:i.some(w=>w.required):p}),y=i=>i.reduce((p,w)=>p.then(()=>{if(r.status==="failed")return;let{value:I}=f;if(w.formatter&&(I=w.formatter(I,w)),!xn(I,w)){r.status="failed",r.validateMessage=rt(I,w);return}if(w.validator)return $t(I)&&w.validateEmpty===!1?void 0:Dn(I,w).then(P=>{P&&typeof P=="string"?(r.status="failed",r.validateMessage=P):P===!1&&(r.status="failed",r.validateMessage=rt(I,w))})}),Promise.resolve()),E=()=>{r.status="unvalidated",r.validateMessage=""},_=()=>t("endValidate",{status:r.status,message:r.validateMessage}),C=(i=e.rules)=>new Promise(p=>{E(),i?(t("startValidate"),y(i).then(()=>{r.status==="failed"?(p({name:e.name,message:r.validateMessage}),_()):(r.status="passed",p(),_())})):p()}),x=i=>{if(l&&e.rules){const{validateTrigger:p}=l.props,w=Je(p).includes(i),I=e.rules.filter(P=>P.trigger?Je(P.trigger).includes(i):w);I.length&&C(I)}},g=i=>{var p;const{maxlength:w}=e;if(L(w)&&j(i)>+w){const I=c();if(I&&j(I)===+w)return I;const P=(p=o.value)==null?void 0:p.selectionEnd;if(r.focused&&P){const V=[...i],N=V.length-+w;return V.splice(P-N,N),V.join("")}return Te(i,+w)}return i},b=(i,p="onChange")=>{const w=i;i=g(i);const I=j(w)-j(i);if(e.type==="number"||e.type==="digit"){const V=e.type==="number";i=vn(i,V,V)}let P=0;if(e.formatter&&p===e.formatTrigger){const{formatter:V,maxlength:N}=e;if(i=V(i),L(N)&&j(i)>+N&&(i=Te(i,+N)),o.value&&r.focused){const{selectionEnd:_e}=o.value,We=Te(w,_e);P=j(V(We))-j(We)}}if(o.value&&o.value.value!==i)if(r.focused){let{selectionStart:V,selectionEnd:N}=o.value;if(o.value.value=i,L(V)&&L(N)){const _e=j(i);I?(V-=I,N-=I):P&&(V+=P,N+=P),o.value.setSelectionRange(Math.min(V,_e),Math.min(N,_e))}}else o.value.value=i;i!==e.modelValue&&t("update:modelValue",i)},m=i=>{i.target.composing||b(i.target.value)},R=()=>{var i;return(i=o.value)==null?void 0:i.blur()},K=()=>{var i;return(i=o.value)==null?void 0:i.focus()},U=()=>{const i=o.value;e.type==="textarea"&&e.autosize&&i&&$n(i,e.autosize)},J=i=>{r.focused=!0,t("focus",i),Q(U),d("readonly")&&R()},fe=i=>{r.focused=!1,b(c(),"onBlur"),t("blur",i),!d("readonly")&&(x("onBlur"),Q(U),sn())},W=i=>t("clickInput",i),me=i=>t("clickLeftIcon",i),he=i=>t("clickRightIcon",i),ge=i=>{ce(i),t("update:modelValue",""),t("clear",i)},oe=$(()=>{if(typeof e.error=="boolean")return e.error;if(l&&l.props.showError&&r.status==="failed")return!0}),re=$(()=>{const i=d("labelWidth"),p=d("labelAlign");if(i&&p!=="top")return{width:H(i)}}),ie=i=>{i.keyCode===13&&(!(l&&l.props.submitOnEnter)&&e.type!=="textarea"&&ce(i),e.type==="search"&&R()),t("keypress",i)},q=()=>e.id||`${a}-input`,$e=()=>r.status,ve=()=>{const i=M("control",[d("inputAlign"),{error:oe.value,custom:!!n.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(n.input)return v("div",{class:i,onClick:W},[n.input()]);const p={id:q(),ref:o,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:i,disabled:d("disabled"),readonly:d("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${a}-label`:void 0,onBlur:fe,onFocus:J,onInput:m,onClick:W,onChange:it,onKeypress:ie,onCompositionend:it,onCompositionstart:In};return e.type==="textarea"?v("textarea",p,null):v("input",Fe(Bn(e.type),p),null)},Be=()=>{const i=n["left-icon"];if(e.leftIcon||i)return v("div",{class:M("left-icon"),onClick:me},[i?i():v(X,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},be=()=>{const i=n["right-icon"];if(e.rightIcon||i)return v("div",{class:M("right-icon"),onClick:he},[i?i():v(X,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},le=()=>{if(e.showWordLimit&&e.maxlength){const i=j(c());return v("div",{class:M("word-limit")},[v("span",{class:M("word-num")},[i]),ut("/"),e.maxlength])}},Vt=()=>{if(l&&l.props.showErrorMessage===!1)return;const i=e.errorMessage||r.validateMessage;if(i){const p=n["error-message"],w=d("errorMessageAlign");return v("div",{class:M("error-message",w)},[p?p({message:i}):i])}},kt=()=>{const i=d("labelWidth"),p=d("labelAlign"),w=d("colon")?":":"";if(n.label)return[n.label(),w];if(e.label)return v("label",{id:`${a}-label`,for:n.input?void 0:q(),onClick:I=>{ce(I),K()},style:p==="top"&&i?{width:H(i)}:void 0},[e.label+w])},At=()=>[v("div",{class:M("body")},[ve(),u.value&&v(X,{ref:h,name:e.clearIcon,class:M("clear")},null),be(),n.button&&v("div",{class:M("button")},[n.button()])]),le(),Vt()];return Rt({blur:R,focus:K,validate:C,formValue:f,resetValidation:E,getValidationStatus:$e}),Ot(wt,{customValue:s,resetValidation:E,validateWithTrigger:x}),G(()=>e.modelValue,()=>{b(c()),E(),x("onChange"),Q(U)}),Le(()=>{b(c(),e.formatTrigger),Q(U)}),Ke("touchstart",ge,{target:$(()=>{var i;return(i=h.value)==null?void 0:i.$el})}),()=>{const i=d("disabled"),p=d("labelAlign"),w=Be(),I=()=>{const P=kt();return p==="top"?[w,P].filter(Boolean):P||[]};return v(Yn,{size:e.size,class:M({error:oe.value,disabled:i,[`label-${p}`]:p}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:re.value,valueClass:M("value"),titleClass:[M("label",[p,{required:S.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:w&&p!=="top"?()=>w:null,title:I,value:At,extra:n.extra})}}});const Jn=Ie(Gn),[Zn,se,Qn]=Y("search"),ea=ae({},Ue,{label:String,shape:O("square"),leftIcon:O("search"),clearable:De,actionText:String,background:String,showAction:Boolean});var ta=A({name:Zn,props:ea,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:n,attrs:a}){const r=Pt(),o=D(),h=()=>{n.action||(t("update:modelValue",""),t("cancel"))},s=m=>{m.keyCode===13&&(ce(m),t("search",e.modelValue))},l=()=>e.id||`${r}-input`,c=()=>{if(n.label||e.label)return v("label",{class:se("label"),for:l()},[n.label?n.label():e.label])},d=()=>{if(e.showAction){const m=e.actionText||Qn("cancel");return v("div",{class:se("action"),role:"button",tabindex:0,onClick:h},[n.action?n.action():m])}},u=()=>{var m;return(m=o.value)==null?void 0:m.blur()},f=()=>{var m;return(m=o.value)==null?void 0:m.focus()},S=m=>t("blur",m),y=m=>t("focus",m),E=m=>t("clear",m),_=m=>t("clickInput",m),C=m=>t("clickLeftIcon",m),x=m=>t("clickRightIcon",m),g=Object.keys(Ue),b=()=>{const m=ae({},a,Ge(e,g),{id:l()}),R=K=>t("update:modelValue",K);return v(Jn,Fe({ref:o,type:"search",class:se("field",{"with-message":m.errorMessage}),border:!1,onBlur:S,onFocus:y,onClear:E,onKeypress:s,onClickInput:_,onClickLeftIcon:C,onClickRightIcon:x,"onUpdate:modelValue":R},m),Ge(n,["left-icon","right-icon"]))};return Rt({focus:f,blur:u}),()=>{var m;return v("div",{class:se({"show-action":e.showAction}),style:{background:e.background}},[(m=n.left)==null?void 0:m.call(n),v("div",{class:se("content",e.shape)},[c(),b()]),d()])}}});function na(e,t,n=!1){let a;return(...r)=>{const o=n&&!a;a&&clearTimeout(a),a=window.setTimeout(()=>{a=void 0,n||e(...r)},t),o&&e(...r)}}const aa=A({name:"CustomSearch",__name:"index",props:{modelValue:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=t,{modelValue:r}=dt(n),o=D(r.value);G(r,(s,l)=>{s!==l&&(o.value=s)});const h=na(s=>{a("update:modelValue",s)},800);return(s,l)=>{const c=ta;return F(),Mt(c,{modelValue:B(o),"onUpdate:modelValue":[l[0]||(l[0]=d=>Se(o)?o.value=d:null),B(h)],placeholder:"Search…"},null,8,["modelValue","onUpdate:modelValue"])}}});function oa(e,t){if(!ze||!window.IntersectionObserver)return;const n=new IntersectionObserver(o=>{t(o[0].intersectionRatio>0)},{root:document.body}),a=()=>{e.value&&n.observe(e.value)},r=()=>{e.value&&n.unobserve(e.value)};ct(r),Ft(r),yt(a)}const[ra,ia]=Y("sticky"),la={zIndex:k,position:O("top"),container:Object,offsetTop:Ce(0),offsetBottom:Ce(0)};var sa=A({name:ra,props:la,emits:["scroll","change"],setup(e,{emit:t,slots:n}){const a=D(),r=an(a),o=Me({fixed:!1,width:0,height:0,transform:0}),h=D(!1),s=$(()=>hn(e.position==="top"?e.offsetTop:e.offsetBottom)),l=$(()=>{if(h.value)return;const{fixed:f,height:S,width:y}=o;if(f)return{width:`${y}px`,height:`${S}px`}}),c=$(()=>{if(!o.fixed||h.value)return;const f=ae(cn(e.zIndex),{width:`${o.width}px`,height:`${o.height}px`,[e.position]:`${s.value}px`});return o.transform&&(f.transform=`translate3d(0, ${o.transform}px, 0)`),f}),d=f=>t("scroll",{scrollTop:f,isFixed:o.fixed}),u=()=>{if(!a.value||et(a))return;const{container:f,position:S}=e,y=te(a),E=rn(window);if(o.width=y.width,o.height=y.height,S==="top")if(f){const _=te(f),C=_.bottom-s.value-o.height;o.fixed=s.value>y.top&&_.bottom>0,o.transform=C<0?C:0}else o.fixed=s.value>y.top;else{const{clientHeight:_}=document.documentElement;if(f){const C=te(f),x=_-C.top-s.value-o.height;o.fixed=_-s.value<y.bottom&&_>C.top,o.transform=x<0?-x:0}else o.fixed=_-s.value<y.bottom}d(E)};return G(()=>o.fixed,f=>t("change",f)),Ke("scroll",u,{target:r,passive:!0}),oa(a,u),G([St,xt],()=>{!a.value||et(a)||!o.fixed||(h.value=!0,Q(()=>{const f=te(a);o.width=f.width,o.height=f.height,h.value=!1}))}),()=>{var f;return v("div",{ref:a,style:l.value},[v("div",{class:ia({fixed:o.fixed&&!h.value}),style:c.value},[(f=n.default)==null?void 0:f.call(n)])])}}});const ca=e=>e==="defer"||e===!1;function ke(...e){var E;const t=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(t);let[n,a,r={}]=e;if(typeof n!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof a!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const o=ft(),h=a,s=()=>ee.value,l=()=>o.isHydrating?o.payload.data[n]:o.static.data[n];r.server=r.server??!0,r.default=r.default??s,r.getCachedData=r.getCachedData??l,r.lazy=r.lazy??!1,r.immediate=r.immediate??!0,r.deep=r.deep??ee.deep,r.dedupe=r.dedupe??"cancel";const c=r.getCachedData(n,o),d=c!=null;if(!o._asyncData[n]||!r.immediate){(E=o.payload._errors)[n]??(E[n]=ee.errorValue);const _=r.deep?D:Nt;o._asyncData[n]={data:_(d?c:r.default()),pending:D(!d),error:mt(o.payload._errors,n),status:D("idle"),_default:r.default}}const u={...o._asyncData[n]};delete u._default,u.refresh=u.execute=(_={})=>{if(o._asyncDataPromises[n]){if(ca(_.dedupe??r.dedupe))return o._asyncDataPromises[n];o._asyncDataPromises[n].cancelled=!0}if(_._initial||o.isHydrating&&_._initial!==!1){const x=_._initial?c:r.getCachedData(n,o);if(x!=null)return Promise.resolve(x)}u.pending.value=!0,u.status.value="pending";const C=new Promise((x,g)=>{try{x(h(o))}catch(b){g(b)}}).then(async x=>{if(C.cancelled)return o._asyncDataPromises[n];let g=x;r.transform&&(g=await r.transform(x)),r.pick&&(g=da(g,r.pick)),o.payload.data[n]=g,u.data.value=g,u.error.value=ee.errorValue,u.status.value="success"}).catch(x=>{if(C.cancelled)return o._asyncDataPromises[n];u.error.value=Ht(x),u.data.value=B(r.default()),u.status.value="error"}).finally(()=>{C.cancelled||(u.pending.value=!1,delete o._asyncDataPromises[n])});return o._asyncDataPromises[n]=C,o._asyncDataPromises[n]},u.clear=()=>ua(o,n);const f=()=>u.refresh({_initial:!0}),S=r.server!==!1&&o.payload.serverRendered;{const _=ue();if(_&&!_._nuxtOnBeforeMountCbs){_._nuxtOnBeforeMountCbs=[];const g=_._nuxtOnBeforeMountCbs;zt(()=>{g.forEach(b=>{b()}),g.splice(0,g.length)}),Ae(()=>g.splice(0,g.length))}S&&o.isHydrating&&(u.error.value||c!=null)?(u.pending.value=!1,u.status.value=u.error.value?"error":"success"):_&&(o.payload.serverRendered&&o.isHydrating||r.lazy)&&r.immediate?_._nuxtOnBeforeMountCbs.push(f):r.immediate&&f();const C=Kt();if(r.watch){const g=G(r.watch,()=>u.refresh());C&&Ye(g)}const x=o.hook("app:data:refresh",async g=>{(!g||g.includes(n))&&await u.refresh()});C&&Ye(x)}const y=Promise.resolve(o._asyncDataPromises[n]).then(()=>u);return Object.assign(y,u),y}function ua(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=ee.errorValue),e._asyncData[t]&&(e._asyncData[t].data.value=void 0,e._asyncData[t].error.value=ee.errorValue,e._asyncData[t].pending.value=!1,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]&&(e._asyncDataPromises[t].cancelled=!0),e._asyncDataPromises[t]=void 0)}function da(e,t){const n={};for(const a of t)n[a]=e[a];return n}const fa="$s";function je(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(t);const[n,a]=e;if(!n||typeof n!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+n);if(a!==void 0&&typeof a!="function")throw new Error("[nuxt] [useState] init must be a function: "+a);const r=fa+n,o=ft(),h=mt(o.payload.state,r);if(h.value===void 0&&a){const s=a();if(Se(s))return o.payload.state[r]=s,s;h.value=s}return h}const Tt=()=>{const e=Ut(),{api:t}=e.public;return{api:t,buildApiUrl:(a,r={limit:10})=>{if(!a)throw new Error("url is required");return Object.keys(r).forEach(o=>{const h=`${r[o]}`;h&&(a=a.replace(`\${${o}}`,h))}),a}}},ma={class:"item"},ha=["href"],ga=["src"],va={class:"recommend-item-title single-line-ellipsis"},ba={class:"recommend-item-sub-title"},_a=A({__name:"item",props:{data:{}},setup(e){return(t,n)=>(F(),z("div",ma,[T("a",{href:t.data.link[0].attributes.href},[T("img",{src:t.data["im:image"][0].label,alt:"data['im:image'][0].label",class:"logo"},null,8,ga),T("h1",va,ne(t.data["im:name"].label),1),T("h2",ba,ne(t.data.category.attributes.label),1)],8,ha)]))}}),ya=de(_a,[["__scopeId","data-v-7a8e9d4e"]]),pa=e=>(vt("data-v-8de08bf2"),e=e(),bt(),e),wa={class:"container"},Ea=pa(()=>T("div",{class:"title"},"推荐",-1)),Ca={class:"recommend"},Sa=A({name:"RecommendHeader",__name:"index",async setup(e){let t,n;const{api:a,buildApiUrl:r}=Tt(),{data:o,error:h,refresh:s}=([t,n]=ht(async()=>ke("topApps",async()=>{const d=r(a.appleTopAppsUrl,{limit:10}),u=await $fetch(d);return JSON.parse(u)})),t=await t,n(),t),l=je("searchKey",()=>""),c=$(()=>{var d,u;return l?(d=o.value)==null?void 0:d.feed.entry.filter(f=>{const{"im:name":S,"im:artist":y,summary:E}=f,_=S.label?S.label.toLocaleLowerCase():"",C=y.label?y.label.toLocaleLowerCase():"",x=E.label?E.label.toLocaleLowerCase():"",g=l.value?l.value.toLocaleLowerCase():"",b=_.indexOf(g)!==-1,m=C.indexOf(g)!==-1,R=x.indexOf(g)!==-1;return b||m||R}):(u=o.value)==null?void 0:u.feed.entry});return(d,u)=>(F(),z("div",wa,[jt(d.$slots,"title",{},()=>[Ea]),T("div",Ca,[(F(!0),z(Ne,null,gt(B(c),f=>(F(),z("div",{class:"recommend-item",key:f.id.label},[v(ya,{data:f},null,8,["data"])]))),128))])]))}}),xa=de(Sa,[["__scopeId","data-v-8de08bf2"]]);function Da(){const e=D([]),t=[];return Wt(()=>{e.value=[]}),[e,a=>(t[a]||(t[a]=r=>{e.value[a]=r}),t[a])]}function Ia(e,t){return e>t?"horizontal":t>e?"vertical":""}function $a(){const e=D(0),t=D(0),n=D(0),a=D(0),r=D(0),o=D(0),h=D(""),s=D(!0),l=()=>h.value==="vertical",c=()=>h.value==="horizontal",d=()=>{n.value=0,a.value=0,r.value=0,o.value=0,h.value="",s.value=!0};return{move:S=>{const y=S.touches[0];n.value=(y.clientX<0?0:y.clientX)-e.value,a.value=y.clientY-t.value,r.value=Math.abs(n.value),o.value=Math.abs(a.value);const E=10;(!h.value||r.value<E&&o.value<E)&&(h.value=Ia(r.value,o.value)),s.value&&(r.value>ot||o.value>ot)&&(s.value=!1)},start:S=>{d(),e.value=S.touches[0].clientX,t.value=S.touches[0].clientY},reset:d,startX:e,startY:t,deltaX:n,deltaY:a,offsetX:r,offsetY:o,direction:h,isVertical:l,isHorizontal:c,isTap:s}}const[Ba,pe]=Y("rate");function Pa(e,t,n,a){return e>=t?{status:"full",value:1}:e+.5>=t&&n&&!a?{status:"half",value:.5}:e+1>=t&&n&&a?{status:"half",value:Math.round((e-t+1)*1e10)/1e10}:{status:"void",value:0}}const Ra={size:k,icon:O("star"),color:String,count:Ce(5),gutter:k,clearable:Boolean,readonly:Boolean,disabled:Boolean,voidIcon:O("star-o"),allowHalf:Boolean,voidColor:String,touchable:De,iconPrefix:String,modelValue:Gt(0),disabledColor:String};var Ta=A({name:Ba,props:Ra,emits:["change","update:modelValue"],setup(e,{emit:t}){const n=$a(),[a,r]=Da(),o=D(),h=$(()=>e.readonly||e.disabled),s=$(()=>h.value||!e.touchable),l=$(()=>Array(+e.count).fill("").map((g,b)=>Pa(e.modelValue,b+1,e.allowHalf,e.readonly)));let c,d,u=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;const S=()=>{d=te(o);const g=a.value.map(te);c=[],g.forEach((b,m)=>{u=Math.min(b.top,u),f=Math.max(b.top,f),e.allowHalf?c.push({score:m+.5,left:b.left,top:b.top,height:b.height},{score:m+1,left:b.left+b.width/2,top:b.top,height:b.height}):c.push({score:m+1,left:b.left,top:b.top,height:b.height})})},y=(g,b)=>{for(let m=c.length-1;m>0;m--)if(b>=d.top&&b<=d.bottom){if(g>c[m].left&&b>=c[m].top&&b<=c[m].top+c[m].height)return c[m].score}else{const R=b<d.top?u:f;if(g>c[m].left&&c[m].top===R)return c[m].score}return e.allowHalf?.5:1},E=g=>{h.value||g===e.modelValue||(t("update:modelValue",g),t("change",g))},_=g=>{s.value||(n.start(g),S())},C=g=>{if(!s.value&&(n.move(g),n.isHorizontal()&&!n.isTap.value)){const{clientX:b,clientY:m}=g.touches[0];ce(g),E(y(b,m))}},x=(g,b)=>{const{icon:m,size:R,color:K,count:U,gutter:J,voidIcon:fe,disabled:W,voidColor:me,allowHalf:he,iconPrefix:ge,disabledColor:oe}=e,re=b+1,ie=g.status==="full",q=g.status==="void",$e=he&&g.value>0&&g.value<1;let ve;J&&re!==+U&&(ve={paddingRight:H(J)});const Be=be=>{S();let le=he?y(be.clientX,be.clientY):re;e.clearable&&n.isTap.value&&le===e.modelValue&&(le=0),E(le)};return v("div",{key:b,ref:r(b),role:"radio",style:ve,class:pe("item"),tabindex:W?void 0:0,"aria-setsize":U,"aria-posinset":re,"aria-checked":!q,onClick:Be},[v(X,{size:R,name:ie?m:fe,class:pe("icon",{disabled:W,full:ie}),color:W?oe:ie?K:me,classPrefix:ge},null),$e&&v(X,{size:R,style:{width:g.value+"em"},name:q?fe:m,class:pe("icon",["half",{disabled:W,full:!q}]),color:W?oe:q?me:K,classPrefix:ge},null)])};return on(()=>e.modelValue),Ke("touchmove",C,{target:o}),()=>v("div",{ref:o,role:"radiogroup",class:pe({readonly:e.readonly,disabled:e.disabled}),tabindex:e.disabled?void 0:0,"aria-disabled":e.disabled,"aria-readonly":e.readonly,onTouchstartPassive:_},[l.value.map(x)])}});const Va=A({name:"UserRating",__name:"index",props:{rating:{default:0},ratingCount:{default:0},size:{default:18}},setup(e){return(t,n)=>{const a=Ta;return F(),z(Ne,null,[v(a,{"model-value":t.rating,size:16,color:"#ffd21e","void-icon":"star","void-color":"#eee"},null,8,["model-value"]),ut(" ("+ne(t.ratingCount)+") ",1)],64)}}}),ka={class:"item"},Aa=["href"],La={class:"info"},Oa={class:"index"},Ma={class:"text"},Fa=["src","alt"],Na={class:"base-info"},za={class:"recommend-item-title single-line-ellipsis"},Ha={class:"recommend-item-sub-title"},Ka={key:0,class:"rating"},Ua=A({__name:"item",props:{index:{},data:{},additionalDatas:{}},setup(e){const t=e,{data:n,additionalDatas:a}=dt(t),r=n.value.id.attributes["im:id"],o=$(()=>{var l;return(l=a.value)==null?void 0:l.results.find(c=>`${c.trackId}`===r)}),h=$(()=>{var l;return(l=o.value)==null?void 0:l.averageUserRating}),s=$(()=>{var l;return(l=o.value)==null?void 0:l.userRatingCount});return(l,c)=>{const d=Va;return F(),z("div",ka,[T("a",{href:B(n).link[0].attributes.href},[T("div",La,[T("div",Oa,[T("div",Ma,ne(l.index+1),1)]),T("img",{src:B(n)["im:image"][0].label,alt:B(n)["im:image"][0].label,class:"logo"},null,8,Fa),T("div",Na,[T("h1",za,ne(B(n)["im:name"].label),1),T("h2",Ha,ne(B(n).category.attributes.label),1),B(h)?(F(),z("div",Ka,[v(d,{rating:B(h),"rating-count":B(s)},null,8,["rating","rating-count"])])):Yt("",!0)])])],8,Aa)])}}}),ja=de(Ua,[["__scopeId","data-v-4fac5267"]]),Wa={class:"recommended-list"},Ya=A({name:"RecommendFreeApps",__name:"index",async setup(e){let t,n;const{api:a,buildApiUrl:r}=Tt(),{data:o,error:h,refresh:s}=([t,n]=ht(async()=>ke("freeApps",async()=>{const S=r(a.appleTopFreeAppsUrl,{limit:100}),y=await $fetch(S);return JSON.parse(y)})),t=await t,n(),t),{data:l,error:c,refresh:d}=ke("additionalData",async()=>{if(!o.value)return;const S=o.value.feed.entry.map(C=>C.id.attributes["im:id"]);if(!S)return;const y=r(a.appleLookupApsUrl,{id:S.filter(C=>!!C).join(",")}),E=await $fetch(y);return JSON.parse(E)},{immediate:!0}),u=je("searchKey",()=>""),f=$(()=>{var S,y;return u?(S=o.value)==null?void 0:S.feed.entry.filter(E=>{const{"im:name":_,"im:artist":C,summary:x}=E,g=_.label?_.label.toLocaleLowerCase():"",b=C.label?C.label.toLocaleLowerCase():"",m=x.label?x.label.toLocaleLowerCase():"",R=u.value?u.value.toLocaleLowerCase():"",K=g.indexOf(R)!==-1,U=b.indexOf(R)!==-1,J=m.indexOf(R)!==-1;return K||U||J}):(y=o.value)==null?void 0:y.feed.entry});return(S,y)=>(F(),z("div",Wa,[(F(!0),z(Ne,null,gt(B(f),(E,_)=>(F(),z("div",{class:"recommended-list-item",key:E.id.label},[v(ja,{index:_,data:E,"additional-datas":B(l)},null,8,["index","data","additional-datas"])]))),128))]))}}),qa=de(Ya,[["__scopeId","data-v-c2b5959e"]]),Xa=e=>(vt("data-v-a80e71b2"),e=e(),bt(),e),Ga=Xa(()=>T("h1",{class:"title"},[T("div",{class:"text"},"Recommend")],-1)),Ja=A({__name:"index",setup(e){const t=je("searchKey",()=>"");return(n,a)=>{const r=aa,o=sa,h=xa,s=qa;return F(),z("div",null,[v(o,null,{default:qe(()=>[v(r,{modelValue:B(t),"onUpdate:modelValue":a[0]||(a[0]=l=>Se(t)?t.value=l:null)},null,8,["modelValue"])]),_:1}),v(h,null,{title:qe(()=>[Ga]),_:1}),v(s)])}}}),eo=de(Ja,[["__scopeId","data-v-a80e71b2"]]);export{eo as default};
